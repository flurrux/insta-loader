chrome.runtime.onConnect.addListener((function(e){"disk-downloader"===e.name&&e.onMessage.addListener((function(o,n){((e,o,n)=>{console.log("connecting to native host..."),console.log("request",e);try{const o=chrome.runtime.connectNative("insta_loader_host");o.onMessage.addListener((e=>{console.log("received native message",e),n({origin:"native host response",data:e})})),o.onDisconnect.addListener((()=>{const e=chrome.runtime.lastError.message;console.log("disconnected from native host",e),n({origin:"native host disconnect",data:e})}));const s=JSON.stringify(e);o.postMessage(s)}catch(e){return void console.log(e)}})(o,0,(o=>{e.postMessage(o)}))}))}));